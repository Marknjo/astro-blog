---
import { Image } from "astro:assets"
import Posts from "../components/Posts.astro"
import MainLayout from "../layouts/MainLayout.astro"
import Link from "../components/Link.astro"
import { getCollection, type CollectionEntry } from "astro:content"

const title = "Astro Blog"
const description = "My blog homepage"

// all posts
const allPosts: CollectionEntry<"posts">[] = await getCollection("posts")
---

<MainLayout {title} {description}>
  <section class="container about" aria-label="About Me">
    <Image
      src="/images/headshot.jpg"
      alt="My headshot"
      width="200"
      height="330"
      quality="mid"
      loading="lazy"
      transition:name="my-img"
    />
    <div class="content">
      <h1 class="h1">Welcome to my blog</h1>
      <p>
        I'm a fullstack JavaScript Engineer with the Emphasis on NextJs, Remix,
        & AstroJs meta frameworks. I love working with these frameworks because
        they allow me to build robust applications that people actually want to
        use
      </p>

      <Link href="/about" style="secondary" text="About Me" />
    </div>
  </section>

  <section class="container" aria-label="Latest Blog Posts">
    <h2 class="h3">Latest blog Posts</h2>
    <Posts {allPosts} postOptions={{ limit: 3 }} />
  </section>
</MainLayout>
